#!/bin/sh
###################################################################################################
echo -n "[ Creating xbox cpuinfo script ] ... "
###################################################################################################
echo "\
#!/bin/sh
# return hardcoded cpuinfo for XBOX (i removed "mtrr" from flags)
cat <<EOF
vendor_id	: GenuineIntel
cpu family	: 6
model		: 8
stepping	: 10
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep pge mca cmov pat pse36 mmx fxsr sse
cpu MHz		: 733.332
model name	: Celeron (Coppermine)
EOF
" > TOOLS/cpuinfo && chmod +x TOOLS/cpuinfo && echo "done!" || (echo "[ Creating xbox cpuinfo script failed! ]" && exit)
###################################################################################################
echo "[ Running configure script for XBMC ]"
###################################################################################################
chmod +x configure && ./configure \
--prefix='Q:\\' \
--bindir='Q:\\mplayer' \
--datadir='Q:\\mplayer' \
--confdir='Q:\\mplayer' \
--libdir='Q:\\mplayer' \
--disable-mencoder \
--disable-sighandler \
--disable-live \
--disable-gl \
--disable-tv \
--disable-vidix \
--disable-inet6 \
--disable-termcap \
--disable-freetype \
--enable-libdts \
--enable-largefiles \
--enable-winsock2 \
--enable-fribidi \
--enable-vorbis \
--enable-mad \
--enable-xvid \
--enable-directx \
--enable-win32waveout \
--with-codecsdir='Q:\\mplayer\\codecs' \
--with-reallibdir='Q:\\mplayer\\codecs' \
--with-fribidi-config=$PWD/xbmcsys/fribidi/fribidi-config \
--with-freetype-config=$PWD/xbmcsys/freetype/freetype-config \
--with-extraincdir="$PWD/xbmcsys -I$PWD/xbmcsys/xbmc_vobsub -D_XBOX -DXBMC_VOBSUB" \
--with-extralibdir="$PWD/xbmcsys/lib -L$PWD/xbmcsys/xbmc_vobsub"
