<scraper name="allocine.fr" content="movies" thumb="allocine.jpg">
	<CreateSearchUrl dest="3">
		<RegExp input="$$1" output="http://www.allocine.fr/recherche/?motcle=\1&amp;" dest="3">
			<expression></expression>
		</RegExp>
	</CreateSearchUrl>
	<GetSearchResults dest="8">
		<RegExp input="$$5" output="&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot; standalone=&quot;yes&quot;?&gt;&lt;results&gt;\1&lt;/results&gt;" dest="8">
			
			<RegExp input="$$1" output="#\1#\2#\3 (\4)#" dest="4">
				<expression repeat="yes">&lt;h4&gt;&lt;a href=&quot;/film/([^=]*)=([^.]+).html&quot; class=&quot;link1&quot;&gt;([^(]*)&lt;/a&gt;[^(]*\(([^)]*)\)</expression>
			</RegExp>
			<RegExp input="$$4" output="&lt;entity&gt;&lt;title&gt;\3&lt;/title&gt;&lt;url&gt;http://www.allocine.fr/film/\1=\2.html&lt;/url&gt;&lt;url&gt;http://www.allocine.fr/film/galerie_gen_cfilm=\2&amp;amp;filtre=&amp;amp;page=1.html&lt;/url&gt;&lt;url&gt;http://www.allocine.fr/film/casting_gen_cfilm=\2.html&lt;/url&gt;&lt;id&gt;\2&lt;/id&gt;&lt;/entity&gt;" dest="5+">
				<expression repeat="yes">#([^#]*)#([^#]*)#([^#]*)#</expression>
			</RegExp>
			<expression noclean="1"></expression>
		</RegExp>
	</GetSearchResults>
	<GetDetails dest="3">
		<RegExp input="$$5" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">

			<!--Title -->
			<RegExp input="$$1" output="&lt;title&gt;\1&lt;/title&gt;" dest="5">
				<expression trim="1" noclean="1">&lt;title&gt;([^&lt;]*)&lt;</expression>
			</RegExp>

			<!--Year -->
			<RegExp input="$$1" output="&lt;year&gt;\1&lt;/year&gt;" dest="5+">
				<expression>&gt;Année de production : ([^&lt;]*)</expression>
			</RegExp>

			<!--Director-->
			<RegExp input="$$1" output="&lt;director&gt;\1&lt;/director&gt;" dest="5+">
				<expression>Réalisé par &lt;[^&gt;]*&gt;([^&lt;]*)</expression>
			</RegExp>

			<!--Runtime-->
			<RegExp input="$$1" output="&lt;runtime&gt;\1&lt;/runtime&gt;" dest="5+">
				<expression>Durée : ([^.]*)</expression>
			</RegExp>

			<!--Thumbnail-->
			<RegExp input="$$2" output="\1" dest="7">
				<expression>Toutes les vignettes(.*)class=&quot;galerie&quot;</expression>
                        </RegExp>
			<RegExp input="$$7" output="&lt;thumb&gt;\1&lt;/thumb&gt;" dest="5+">
				<expression repeat="yes">img src=&quot;([^&quot;]*)&quot;</expression>
                        </RegExp>
			<RegExp input="$$1" output="&lt;thumb&gt;\1&lt;/thumb&gt;" dest="5+">
				<expression>&quot;([^&quot;]*)&quot; border=&quot;0&quot; alt=&quot;&quot; class=&quot;affichette</expression>
                        </RegExp>

			<!--Credits-->
			<RegExp input="$$3" output="&lt;credits&gt;\1&lt;/credits&gt;" dest="5+">
				<expression>Scénariste&lt;/h5&gt;&lt;/td&gt;[^&lt;]*&lt;[^&gt;]*&gt;&lt;[^&gt;]*&gt;[^&lt;]*&lt;[^&gt;]*&gt;([^&lt;]*)&lt;</expression>
			</RegExp>

			<!--Rating Votes-->
			<RegExp input="$$1" output="\1#\2" dest="7">
				<expression>&lt;h4&gt;Note moyenne : &lt;([^&gt;]*)&gt;[^1-9]*([1-9]*)</expression>
			</RegExp>
			<RegExp input="$$7" output="&lt;rating&gt;\1étoile(s)&lt;/rating&gt;&lt;votes&gt;\2&lt;/votes&gt;" dest="5+">
				<expression>class=&quot;etoile_([0-9]*)&quot;[^#]*#([1-9]*)</expression>
			</RegExp>

			<!--Genre-->
			<RegExp input="$$1" output="\1" dest="7">
				<expression noclean="1">Genre :([^(]*)Durée :</expression>
			</RegExp>
			<RegExp input="$$6" output="&lt;genre&gt;\1&lt;/genre&gt;" dest="5+">
				<RegExp input="$$7" output=" / \1" dest="6">
					<expression repeat="yes" noclean="1">&lt;a href[^&gt;]*&gt;([^&lt;]*)&lt;/a&gt;</expression>
				</RegExp>
				<expression> / (.*)</expression>
			</RegExp>

			<!--Actor -->
			<RegExp input="$$3" output="\1" dest="6">
				<expression noclean="1">&lt;b&gt;Acteurs&lt;/b&gt;(.*)&lt;b&gt;Production&lt;/b&gt;</expression>
			</RegExp>
			<RegExp input="$$6" output="&lt;actor&gt;&lt;name&gt;\2&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;/actor&gt;" dest="5+">
				<expression repeat="yes" noclean="1,2">&lt;h5&gt;([^&lt;]*)&lt;/h5&gt;&lt;/td&gt;[^&lt;]*&lt;[^&gt;]*&gt;&lt;h5&gt;&lt;a[^&gt;]*&gt;([^&lt;]*)&lt;</expression>
			</RegExp>

			<!--Plot outline -->
			<RegExp input="$$1" output="&lt;outline&gt;\1&lt;/outline&gt;&lt;plot&gt;\1&lt;/plot&gt;" dest="5+">
				<expression>&lt;td valign=&quot;top&quot; style=&quot;padding:10 0 0 0&quot;&gt;&lt;div align=&quot;justify&quot;&gt;&lt;h4&gt;([^&lt;]*)&lt;</expression>
			</RegExp>

    			<!--MPAA-->
			<RegExp input="$$1" output="&lt;mpaa&gt;\1&lt;/mpaa&gt" dest="5+">
				<expression>N° de visa[^&gt;]*&gt;[^&gt;]*&gt;[^&gt;]*&gt;[^&gt;]*&gt;[^&gt;]*&gt;([^&lt;]*)&lt;</expression>
			</RegExp>

			<expression noclean="1"></expression>
		</RegExp>
	</GetDetails>
</scraper>
