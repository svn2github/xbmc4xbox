From 23c286841dda2df21bb05917ff6895bec1854f61 Mon Sep 17 00:00:00 2001
From: elupus <elupus@svn>
Date: Tue, 14 Sep 2010 00:42:57 +0000
Subject: [PATCH 31/36] fixed: vp3 decoder should set key_frame field of AVFrame

git-svn-id: https://xbmc.svn.sourceforge.net/svnroot/xbmc/trunk@33768 568bbfeb-2a22-0410-94d2-cc84cf5bfa90
---
 libavcodec/vp3.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

Index: ffmpeg/libavcodec/vp3.c
===================================================================
--- ffmpeg.orig/libavcodec/vp3.c	2011-08-04 20:40:16.984521900 +0100
+++ ffmpeg/libavcodec/vp3.c	2011-08-04 20:51:51.762105400 +0100
@@ -1876,7 +1876,7 @@
         return buf_size;
 
     s->current_frame.reference = 3;
-    s->current_frame.pict_type = s->keyframe ? AV_PICTURE_TYPE_I : AV_PICTURE_TYPE_P;
+    s->current_frame.key_frame = s->keyframe;
     if (ff_thread_get_buffer(avctx, &s->current_frame) < 0) {
         av_log(s->avctx, AV_LOG_ERROR, "get_buffer() failed\n");
         goto error;
