From f8a01f09195302ca630c28d3cabe7a6682c85f96 Mon Sep 17 00:00:00 2001
From: Cory Fields <theuni-nospam-@xbmc.org>
Date: Fri, 9 Jul 2010 15:24:00 -0400
Subject: [PATCH 21/36] fixed: when playing mpegts over rtp/rtsp/sdp, lavf must still read PAT/SDT to get available streams

---
 libavformat/mpegts.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

Index: ffmpeg/libavformat/mpegts.c
===================================================================
--- ffmpeg.orig/libavformat/mpegts.c	2011-08-04 20:51:42.899361400 +0100
+++ ffmpeg/libavformat/mpegts.c	2011-08-04 20:51:47.536028600 +0100
@@ -1868,6 +1868,9 @@
     ts->raw_packet_size = TS_PACKET_SIZE;
     ts->stream = s;
     ts->auto_guess = 1;
+    mpegts_open_section_filter(ts, SDT_PID, sdt_cb, ts, 1);
+    mpegts_open_section_filter(ts, PAT_PID, pat_cb, ts, 1);
+
     return ts;
 }
 
