--- a/libavutil/common.h
+++ b/libavutil/common.h
@@ -52,6 +52,10 @@
 #define FF_ARRAY_ELEMS(a) (sizeof(a) / sizeof((a)[0]))
 #define FFALIGN(x, a) (((x)+(a)-1)&~((a)-1))
 
+#if defined(_MSC_VER) && ! defined(UINT64_C)
+  #define UINT64_C(val) val##ui64
+#endif
+
 /* misc math functions */
 extern const uint8_t ff_log2_tab[256];
 
