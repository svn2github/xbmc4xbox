From 8fd1da5bd2661ea93c7f9e1eab22d5ed43389e1c Mon Sep 17 00:00:00 2001
From: Joakim Plate <elupus@ecce.se>
Date: Sat, 10 Sep 2011 21:50:45 +0200
Subject: [PATCH 02/34] vp3dec: set key_frame field of AVFrame

Signed-off-by: Michael Niedermayer <michaelni@gmx.at>
---
 libavcodec/vp3.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/libavcodec/vp3.c b/libavcodec/vp3.c
index 8b7d82f..0b38973 100644
--- a/libavcodec/vp3.c
+++ b/libavcodec/vp3.c
@@ -1877,6 +1877,7 @@ static int vp3_decode_frame(AVCodecContext *avctx,
 
     s->current_frame.reference = 3;
     s->current_frame.pict_type = s->keyframe ? AV_PICTURE_TYPE_I : AV_PICTURE_TYPE_P;
+    s->current_frame.key_frame = s->keyframe;
     if (ff_thread_get_buffer(avctx, &s->current_frame) < 0) {
         av_log(s->avctx, AV_LOG_ERROR, "get_buffer() failed\n");
         goto error;
-- 
1.7.5.4

