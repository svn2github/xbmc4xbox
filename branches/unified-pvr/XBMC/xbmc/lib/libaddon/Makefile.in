ARCH=@ARCH@
INCLUDES=-I. -I../../addons/include -I../librefmem
SO=AddonLib-$(ARCH).so
ARCHIVE=$(SO:.so=.a)
SYSDIR=../../../system
LIB=libaddon.a
SLIB=$(SYSDIR)/$(SO)
DIRS=../librefmem
SLIBS=../librefmem/librefmem.a
OBJS+=setting.o
OBJS+=settings.o

.PHONY: compile

$(SLIB): $(LIB) $(SLIBS)
	$(CC) $(LIB) -shared -o $(SLIB) $(SLIBS)

$(SLIBS): compile

../librefmem/librefmem.a:
	$(MAKE) -C ../librefmem

include ../../../Makefile.include
